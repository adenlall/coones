<IfModule mod_rewrite.c>

    RewriteEngine On

    # Redirect non-SSL to SSL, except for subdomains like 'dev'
    RewriteCond %{HTTP_HOST} !^dev\. [NC]
    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L,NE]

    # Redirect trailing slashes if not a directory
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ /$1 [L,R=301]

    
    # Handle front controller (send all other requests to index.php)
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
    
    RewriteCond %{REQUEST_URI} !^/blog/ #

</IfModule>
